\documentclass{book}
\usepackage[utf8]{inputenc}
\usepackage[russian]{babel}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{listings}

\usepackage[arrow,curve,matrix,frame]{xy}

%% See http://www.haskell.org/haskellwiki/Literate_programming for details
\lstloadlanguages{Haskell}
\lstnewenvironment{code}
    {\lstset{}%
      \csname lst@SetFirstLabel\endcsname}
    {\csname lst@SaveFirstLabel\endcsname}
    \lstset{
      basicstyle=\small,
      flexiblecolumns=false,
      basewidth={0.5em,0.45em},
      literate={+}{{$+$}}1 {/}{{$/$}}1 {*}{{$*$}}1 {=}{{$=$}}1
               {>}{{$>$}}1 {<}{{$<$}}1 {\\}{{$\lambda$}}1
               {\\\\}{{\char`\\\char`\\}}1
               {->}{{$\rightarrow$}}2 {>=}{{$\geq$}}2 {<-}{{$\leftarrow$}}2
               {<=}{{$\leq$}}2 {=>}{{$\Rightarrow$}}2 
               {\ .}{{$\circ$}}2 {\ .\ }{{$\circ$}}2
               {>>}{{>>}}2 {>>=}{{>>=}}2
               {|}{{$\mid$}}1               
    }
\newcommand{\codesep}{\noindent\hfil\rule{0.5\textwidth}{.4pt}\hfil}

\lstset{language=ml,mathescape=true}

\makeatletter
\newcommand{\translationnotemark}{{\renewcommand{\@makefnmark}{\mbox{$^*$}}\footnotemark{}}}
\newcommand{\translationnotetext}[1]{{\renewcommand{\@makefnmark}{\mbox{$^*$}}\footnotetext{#1  --- {\it прим. перев.}}}\addtocounter{footnote}{-1}}
\newcommand{\translationnote}[1]{\translationnotemark{}\translationnotetext{#1}}
\makeatother


\newcommand{\term}[2]{\textit{#1} (#2)}

\newcommand{\concat}{\ensuremath{+\!\!\!+\,}}

\newtheorem{remark}{\textbf{Замечание}}[chapter]
\newtheorem{exercise}{\textbf{Упражнение}}[chapter]

\newtheorem{hint}{\textbf{Указание разработчикам}}[chapter]

\newtheorem{theorem}{\textbf{Теорема}}[chapter]
\newtheorem{lemma}[theorem]{\textbf{Лемма}}

\newtheorem{definition}{\textbf{Определение}}[chapter]

\author{Крис Окасаки}
\title{Чисто функциональные структуры данных}

\begin{document}
\maketitle

\input{preface.tex}

\input{chapter01.tex}
\input{chapter02.tex}
\input{chapter03.tex}
\input{chapter04.tex}
\input{chapter05.tex}
\input{chapter06.tex}
\input{chapter07.tex}
\input{chapter08.tex}
\input{chapter09.tex}
\input{chapter10.tex}
\input{chapter11.tex}

\input{app-a.tex}
\input{bibliography.tex}

\end{document}
